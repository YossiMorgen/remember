<div class="addCommemorative">
    <mat-card>
        <mat-card-header>
            <mat-card-title>
                <h2>{{editMode ? 'Edit ' : 'Add '}} Commemorative</h2>
            </mat-card-title>
        </mat-card-header>

        <mat-vertical-stepper>
            <mat-step [stepControl]="basicDataForm" errorMessage="ðŸ˜¡">
                <form [formGroup]="basicDataForm">
                    <ng-template matStepLabel>Fill out decease info </ng-template>

                    <mat-form-field appearance="fill">
                        <mat-label>Deceased Name</mat-label>
                        <input matInput formControlName="deceasedName" placeholder="deceasedName">
                    </mat-form-field>
        
                    <mat-form-field appearance="fill">
                        <mat-label>Biography</mat-label>
                        <textarea matInput formControlName="biography" placeholder="biography"></textarea>
                    </mat-form-field>
                    
                    <mat-form-field appearance="fill">
                        <mat-label>About</mat-label>
                        <textarea matInput formControlName="about" placeholder="about"></textarea>
                    </mat-form-field>
                    
        
                    <input type="file" (change)="onFileSelected($event, 'deceaseImage')" accept="image/*" class="file-input" #deceaseImageInput>   
                    <label class="file_button" [class]="deceaseImage ? ' valid ' : 'invalid '" #fileButton>
                        {{deceaseImage?.name || "No file uploaded yet."}}
                        <button (click)="deceaseImageInput.click()" type="button" class="upload-btn">
                            +
                        </button>
                    </label>   
        
                    <mat-form-field>
                        <mat-label>Language</mat-label>
                        <mat-select formControlName="language">
                            <mat-option *ngFor="let l of languages" [value]="l">
                                {{l}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
        
                    <mat-form-field class="example-full-width">
                        <mat-label>Birth Date</mat-label>
                        <input matInput placeholder="Date of Birth" formControlName="birthDate" [matDatepicker]="birthDatePicker">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matIconSuffix [for]="birthDatePicker"></mat-datepicker-toggle>
                        <mat-datepicker touchUi #birthDatePicker></mat-datepicker>
                    </mat-form-field>
        
                    <mat-form-field class="example-full-width">
                        <mat-label>Death Date</mat-label>
                        <input matInput placeholder="Date of Birth" formControlName="deathDate" [matDatepicker]="deathDatePicker">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matIconSuffix [for]="deathDatePicker"></mat-datepicker-toggle>
                        <mat-datepicker touchUi #deathDatePicker></mat-datepicker>
                    </mat-form-field>
                </form>

                <button mat-button matStepperNext>Next</button>
            </mat-step>
            <mat-step  [stepControl]="technicalDataForm" errorMessage="ðŸ˜¡">
                <form [formGroup]="technicalDataForm">
                    <ng-template matStepLabel>Fill out some technical details</ng-template>

                    <mat-form-field appearance="fill">
                        <mat-label>State</mat-label>
                        <input matInput formControlName="state" placeholder="state">
                    </mat-form-field>
                    
                    <mat-form-field appearance="fill">
                        <mat-label>City</mat-label>
                        <input matInput formControlName="city" placeholder="city">
                    </mat-form-field>

                    <mat-form-field appearance="fill">
                        <label>Partner Type</label>
                        <mat-radio-group formControlName="partnerType">
                          <mat-radio-button value="Wife">Wife</mat-radio-button>
                          <mat-radio-button value="Husband">Husband</mat-radio-button>
                        </mat-radio-group>
                    </mat-form-field>
                                    
                    <mat-form-field appearance="fill">
                        <mat-label>Partner Name</mat-label>
                        <input matInput formControlName="partnerName" placeholder="partnerName">
                    </mat-form-field>
                    
                    <mat-form-field appearance="fill">
                        <mat-label>Father Name</mat-label>
                        <input matInput formControlName="fatherName" placeholder="fatherName">
                    </mat-form-field>
                    
                    <mat-form-field appearance="fill">
                        <mat-label>Mother Name</mat-label>
                        <input matInput formControlName="motherName" placeholder="motherName">
                    </mat-form-field>

                    <mat-form-field class="example-chip-list">
                        <mat-label>Decease Offspring</mat-label>
                        <mat-chip-grid #chipGrid aria-label="Enter kids">
                            <mat-chip-row *ngFor="let kid of childrenNames"
                                        (removed)="removeKid(kid)"
                                        [editable]="true"
                                        (edited)="editKid(kid, $event)"
                                        [aria-description]="'press enter to edit ' + kid">
                            {{kid}}
                            <button matChipRemove [attr.aria-label]="'remove ' + kid">
                                <mat-icon>cancel</mat-icon>
                            </button>
                            </mat-chip-row>
                            <input placeholder="kid..."
                                [matChipInputFor]="chipGrid"
                                [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                [matChipInputAddOnBlur]="true"
                                (matChipInputTokenEnd)="addKid($event)"/>
                        </mat-chip-grid>
                    </mat-form-field>
                    
                    <button mat-button matStepperPrevious>Back</button>
                    <button mat-button matStepperNext>Next</button>
                </form>
            </mat-step>
            <mat-step [stepControl]="graveDataForm" errorMessage=" ">
                <form [formGroup]="graveDataForm">
                    <ng-template matStepLabel>Fill out grave details</ng-template>
                    
                    <input type="file" (change)="onFileSelected($event, 'graveImage')" accept="image/*" class="file-input" #graveImageInput>   
                    <label class="file_button" [class]="graveImage ? ' valid ' : 'invalid '" #fileButton>
                        {{graveImage?.name || "No file uploaded yet."}}
                        <button (click)="graveImageInput.click()" type="button" class="upload-btn">
                            +
                        </button>
                    </label>    

                    <mat-form-field appearance="fill">
                        <mat-label>Grave Yard Name</mat-label>
                        <input matInput formControlName="graveYardName" placeholder="graveYardName">
                    </mat-form-field>

                    <mat-form-field appearance="fill">
                        <mat-label>Location Link</mat-label>
                        <input matInput formControlName="locationLink" placeholder="locationLink">
                    </mat-form-field>
                </form>
                
                <mat-card-actions>
                    <button mat-button matStepperPrevious>Back</button>
                </mat-card-actions>

            </mat-step>
        </mat-vertical-stepper>
        <mat-card-actions>
            <button mat-raised-button color="primary" [disabled]="!basicDataForm.valid || !technicalDataForm.valid || !graveDataForm.valid" (click)="submit()" type="submit">Submit</button>
        </mat-card-actions>

    </mat-card>
</div>